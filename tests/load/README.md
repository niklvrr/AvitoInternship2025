# Load Testing

## Описание

Нагрузочное тестирование сервиса для проверки соответствия требованиям:
- RPS: 5 запросов в секунду
- SLI времени ответа: 300 мс (P99)
- SLI успешности: 99.9%

## Запуск тестов

### Предварительные требования

1. **Запустить сервис:**
   ```bash
   docker-compose up
   ```
   Сервис должен быть доступен на `http://localhost:8080`

2. **Тестовые данные:**
   Тесты автоматически создают необходимые тестовые данные (команда "backend" с пользователями u1, u2, u3), но можно создать их вручную заранее.

### Запуск

```bash
# Запустить все нагрузочные тесты
go test -tags=load ./tests/load/... -v -timeout 5m

# Запустить конкретный тест
go test -tags=load ./tests/load/... -v -run TestLoad_CreatePR -timeout 5m
```

## Тестируемые эндпоинты

1. **CreatePR** - создание Pull Request

2. **MergePR** - объединение Pull Request (идемпотентная операция)

3. **GetStatistics** - получение статистики по ревьюверам

## Метрики

Тесты собирают следующие метрики:

- Общее количество запросов
- Количество успешных запросов
- Количество ошибок
- Процент успешных запросов
- Фактический RPS
- Задержки: средняя, P50, P95, P99, P99.9

## Результаты

Результаты тестирования выводятся в консоль и проверяются автоматически:

- Успешность запросов должна быть >= 99.9%
- P99 задержка должна быть <= 300 мс

## Примечания

- Тесты выполняются в течение 30 секунд с целевым RPS = 5
- Для точных результатов рекомендуется запускать тесты на изолированном окружении
- Результаты могут варьироваться в зависимости от нагрузки на систему

